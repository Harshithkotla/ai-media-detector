<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Media Detector</title>
  <link rel="icon" type="image/png" href="assets/logo.png">
  <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="page">

  <!-- ===== TOP BAR ===== -->
  <header class="topbar">
    <div class="brand">
      <img src="assets/logo.png" class="logo" alt="Logo">
      <span>AI Media Detector</span>
    </div>
  </header>

  <!-- ===== MAIN ===== -->
  <main class="main">

    <!-- ===== LEFT INFO ===== -->
    <section class="info">

      <h1>Detect AI-Generated Images</h1>

      <p class="lead">
        Analyze images to estimate whether they are real, AI-generated,
        or visually indistinguishable using modern AI analysis.
      </p>

      <div class="features">
        <span>‚úî Honest AI</span>
        <span>‚úî No Fake 99%</span>
        <span>‚úî Modern AI-safe</span>
      </div>

      <!-- STATS -->
      <div class="stats">
        <div>
          <strong>‚ö° Fast</strong>
          <p>Instant image analysis</p>
        </div>
        <div>
          <strong>üß† AI-Aware</strong>
          <p>Understands modern generators</p>
        </div>
        <div>
          <strong>üîç Transparent</strong>
          <p>No false certainty</p>
        </div>
      </div>

      <!-- WHY SECTION -->
      <div class="how">
        <h3>Why this tool?</h3>
        <p>
          With the rise of powerful image generators, it is becoming
          increasingly difficult to visually distinguish real images
          from AI-generated ones. This tool provides a **risk-based
          estimation**, not blind certainty, and hence declaring as a real image.
        </p>
      </div>

      <!-- HOW IT WORKS -->
      <div class="how">
        <h3>How it works</h3>
        <ol>
          <li>Upload an image</li>
          <li>AI analyzes visual patterns</li>
          <li>Confidence is estimated honestly</li>
        </ol>
      </div>

    </section>

    <!-- ===== RIGHT CARD ===== -->
    <section class="card-wrapper">
      <section class="card">

        <label class="upload-btn" id="uploadLabel">
          Choose Image
          <input type="file" id="fileInput" accept="image/*" hidden onchange="showFileName()">
        </label>

        <p id="fileName" class="file-name hidden"></p>

        <button id="detectBtn" onclick="detectImage()" disabled>
          Detect Image
        </button>

        <div id="preview"></div>

        <div id="result" class="hidden">
          <h3 id="prediction"></h3>
          <p id="confidence"></p>
          <p id="status"></p>
          <p class="note">‚ö†Ô∏è High-quality AI images may appear real.</p>
        </div>

      </section>
    </section>

  </main>

  <!-- ===== FOOTER ===== -->
  <footer class="footer">
    Built with Responsible AI principles ¬∑ Results are probabilistic, not absolute
  </footer>

</div>

<script>
function showFileName() {
  const input = document.getElementById("fileInput");
  const fileNameText = document.getElementById("fileName");
  const uploadLabel = document.getElementById("uploadLabel");
  const detectBtn = document.getElementById("detectBtn");

  if (input.files.length > 0) {
    fileNameText.innerText = "‚úî Selected: " + input.files[0].name;
    fileNameText.classList.remove("hidden");
    uploadLabel.innerText = "Change Image";
    uploadLabel.appendChild(input);
    detectBtn.disabled = false;
  }
}

async function detectImage() {
  const file = document.getElementById("fileInput").files[0];
  if (!file) return;

  document.getElementById("preview").innerHTML =
    `<img src="${URL.createObjectURL(file)}">`;

  const formData = new FormData();
  formData.append("file", file);

  const res = await fetch("http://127.0.0.1:8000/detect/image", {
    method: "POST",
    body: formData
  });

  const data = await res.json();

  document.getElementById("prediction").innerText =
    "Prediction: " + data.prediction;

  document.getElementById("confidence").innerText =
    `Real: ${data.confidence_real}% | AI: ${data.confidence_ai}%`;

  document.getElementById("status").innerText =
    "Status: " + data.status;

  document.getElementById("result").classList.remove("hidden");
}
</script>

</body>
</html>
